{"openapi":"3.1.0","info":{"title":"Tinko API (dev)","version":"0.1.0"},"paths":{"/healthz":{"get":{"summary":"Healthz","operationId":"healthz_healthz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/readyz":{"get":{"summary":"Readyz","operationId":"readyz_readyz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/v1/auth/register":{"post":{"tags":["auth"],"summary":"Register","description":"Register a new user and optionally create a new organization.\n\nIf org_name is provided, creates a new organization.\nOtherwise, requires invitation to existing org (not implemented yet).","operationId":"register_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/auth/login":{"post":{"tags":["auth"],"summary":"Login","description":"Authenticate user and return JWT token.","operationId":"login_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/auth/me":{"get":{"tags":["auth"],"summary":"Get Current User Info","description":"Get current authenticated user information.","operationId":"get_current_user_info_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/auth/org":{"get":{"tags":["auth"],"summary":"Get Current Organization","description":"Get current user's organization information.","operationId":"get_current_organization_v1_auth_org_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/retry/policies":{"get":{"tags":["retry"],"summary":"List Retry Policies","description":"Get all retry policies for the current organization.","operationId":"list_retry_policies_v1_retry_policies_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/RetryPolicyResponse"},"type":"array","title":"Response List Retry Policies V1 Retry Policies Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["retry"],"summary":"Create Retry Policy","description":"Create a new retry policy for the organization.\nRequires admin role.","operationId":"create_retry_policy_v1_retry_policies_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetryPolicyCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetryPolicyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/retry/policies/active":{"get":{"tags":["retry"],"summary":"Get Active Policy","description":"Get the currently active retry policy.","operationId":"get_active_policy_v1_retry_policies_active_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/RetryPolicyResponse"},{"type":"null"}],"title":"Response Get Active Policy V1 Retry Policies Active Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/retry/policies/{policy_id}":{"delete":{"tags":["retry"],"summary":"Deactivate Policy","description":"Deactivate a retry policy.","operationId":"deactivate_policy_v1_retry_policies__policy_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"policy_id","in":"path","required":true,"schema":{"type":"integer","title":"Policy Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/retry/stats":{"get":{"tags":["retry"],"summary":"Get Retry Stats","description":"Get retry statistics for the organization.","operationId":"get_retry_stats_v1_retry_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetryStatsResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/retry/attempts/{attempt_id}/notifications":{"get":{"tags":["retry"],"summary":"Get Attempt Notifications","description":"Get all notification logs for a recovery attempt.","operationId":"get_attempt_notifications_v1_retry_attempts__attempt_id__notifications_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"attempt_id","in":"path","required":true,"schema":{"type":"integer","title":"Attempt Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NotificationLogResponse"},"title":"Response Get Attempt Notifications V1 Retry Attempts  Attempt Id  Notifications Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/retry/attempts/{attempt_id}/retry-now":{"post":{"tags":["retry"],"summary":"Trigger Immediate Retry","description":"Trigger an immediate retry for a recovery attempt.\nBypasses the normal schedule.","operationId":"trigger_immediate_retry_v1_retry_attempts__attempt_id__retry_now_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"attempt_id","in":"path","required":true,"schema":{"type":"integer","title":"Attempt Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/payments/stripe/checkout-sessions":{"post":{"tags":["Stripe Payments"],"summary":"Create Checkout Session","description":"Create a Stripe Checkout Session for payment recovery.\n\nThis endpoint creates a hosted checkout page where customers can complete their payment.\nThe session expires after 24 hours.","operationId":"create_checkout_session_v1_payments_stripe_checkout_sessions_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCheckoutSessionRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/payments/stripe/payment-links":{"post":{"tags":["Stripe Payments"],"summary":"Create Payment Link","description":"Create a reusable Stripe Payment Link.\n\nPayment links are permanent and can be shared multiple times.\nUnlike checkout sessions, they don't expire.","operationId":"create_payment_link_v1_payments_stripe_payment_links_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePaymentLinkRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentLinkResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/payments/stripe/sessions/{session_id}/status":{"get":{"tags":["Stripe Payments"],"summary":"Get Session Status","description":"Retrieve the status of a Stripe Checkout Session.\n\nUse this to check if a customer has completed payment.","operationId":"get_session_status_v1_payments_stripe_sessions__session_id__status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/payments/stripe/checkout":{"post":{"tags":["payments"],"summary":"Create Stripe Checkout","operationId":"create_stripe_checkout_v1_payments_stripe_checkout_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCheckoutIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateIntentOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/payments/stripe/ping":{"get":{"tags":["Stripe Payments"],"summary":"Stripe Ping","description":"Lightweight readiness check for Stripe configuration on the server.","operationId":"stripe_ping_v1_payments_stripe_ping_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/v1/events/payment_failed":{"post":{"tags":["events"],"summary":"Payment Failed","operationId":"payment_failed_v1_events_payment_failed_post","parameters":[{"name":"Idempotency-Key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Idempotency-Key"}},{"name":"Authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FailureEventIn"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FailureEventOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/events/by_ref/{transaction_ref}":{"get":{"tags":["events"],"summary":"List Events By Ref","operationId":"list_events_by_ref_v1_events_by_ref__transaction_ref__get","parameters":[{"name":"transaction_ref","in":"path","required":true,"schema":{"type":"string","title":"Transaction Ref"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/recoveries/by_ref/{transaction_ref}/link":{"post":{"tags":["recoveries"],"summary":"Create Link By Ref","operationId":"create_link_by_ref_v1_recoveries_by_ref__transaction_ref__link_post","parameters":[{"name":"transaction_ref","in":"path","required":true,"schema":{"type":"string","title":"Transaction Ref"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecoveryLinkRequest","default":{"ttl_hours":24.0,"channel":"link"}}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecoveryLinkOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/recoveries/by_ref/{transaction_ref}":{"get":{"tags":["recoveries"],"summary":"List Attempts By Ref","operationId":"list_attempts_by_ref_v1_recoveries_by_ref__transaction_ref__get","parameters":[{"name":"transaction_ref","in":"path","required":true,"schema":{"type":"string","title":"Transaction Ref"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/_dev/bootstrap/recoveries":{"post":{"tags":["_dev"],"summary":"Bootstrap Recoveries","operationId":"bootstrap_recoveries__dev_bootstrap_recoveries_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/_dev/schema/recoveries":{"get":{"tags":["_dev"],"summary":"Schema Recoveries","operationId":"schema_recoveries__dev_schema_recoveries_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/_dev/seed/transaction":{"post":{"tags":["_dev"],"summary":"Seed Transaction","operationId":"seed_transaction__dev_seed_transaction_post","parameters":[{"name":"ref","in":"query","required":false,"schema":{"type":"string","default":"ref_demo_1","title":"Ref"}},{"name":"amount","in":"query","required":false,"schema":{"type":"integer","default":1999,"title":"Amount"}},{"name":"currency","in":"query","required":false,"schema":{"type":"string","default":"inr","title":"Currency"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/_dev/seed/recovery_link":{"post":{"tags":["_dev"],"summary":"Seed Recovery Link","operationId":"seed_recovery_link__dev_seed_recovery_link_post","parameters":[{"name":"ref","in":"query","required":false,"schema":{"type":"string","default":"ref_demo_1","title":"Ref"}},{"name":"ttl_hours","in":"query","required":false,"schema":{"type":"number","default":24.0,"title":"Ttl Hours"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/recoveries/by_token/{token}":{"get":{"tags":["recoveries"],"summary":"Get By Token","operationId":"get_by_token_v1_recoveries_by_token__token__get","parameters":[{"name":"token","in":"path","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/recoveries/by_token/{token}/open":{"post":{"tags":["recoveries"],"summary":"Mark Open","operationId":"mark_open_v1_recoveries_by_token__token__open_post","parameters":[{"name":"token","in":"path","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/classify":{"post":{"tags":["classifier"],"summary":"Classify","operationId":"classify_v1_classify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClassifyIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClassifyOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/payments/stripe/intents":{"post":{"tags":["payments"],"summary":"Create Stripe Intent","operationId":"create_stripe_intent_v1_payments_stripe_intents_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateIntentIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateIntentOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/webhooks/stripe":{"post":{"tags":["webhooks"],"summary":"Webhook Stripe","operationId":"webhook_stripe_v1_webhooks_stripe_post","parameters":[{"name":"Stripe-Signature","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stripe-Signature"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/analytics/recovery_rate":{"get":{"tags":["Analytics"],"summary":"Get Recovery Rate","description":"Get recovery rate percentage over specified period.","operationId":"get_recovery_rate_v1_analytics_recovery_rate_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/analytics/failure_categories":{"get":{"tags":["Analytics"],"summary":"Get Failure Categories","description":"Get breakdown of failure events by category.","operationId":"get_failure_categories_v1_analytics_failure_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/analytics/revenue_recovered":{"get":{"tags":["Analytics"],"summary":"Get Revenue Recovered","description":"Get total revenue recovered over period.","operationId":"get_revenue_recovered_v1_analytics_revenue_recovered_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/analytics/attempts_by_channel":{"get":{"tags":["Analytics"],"summary":"Get Attempts By Channel","description":"Get recovery attempts breakdown by channel.","operationId":"get_attempts_by_channel_v1_analytics_attempts_by_channel_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/analytics/recon/run":{"post":{"tags":["Analytics"],"summary":"Run Reconciliation","description":"Run a read-only reconciliation against Stripe and record results.\n\nReturns counts: {checked, ok, mismatches}.","operationId":"run_reconciliation_v1_analytics_recon_run_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/maintenance/partition/ensure_current":{"post":{"tags":["maintenance"],"summary":"Ensure Current Partition","description":"Safe no-op stub for dev/SQLite; returns ok without DB-specific work.","operationId":"ensure_current_partition_v1_maintenance_partition_ensure_current_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}}},"components":{"schemas":{"CheckoutSessionResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"payment_intent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Intent Id"},"checkout_url":{"type":"string","title":"Checkout Url"},"expires_at":{"type":"string","format":"date-time","title":"Expires At"}},"type":"object","required":["session_id","payment_intent_id","checkout_url","expires_at"],"title":"CheckoutSessionResponse"},"ClassifyIn":{"properties":{"code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Code"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","title":"ClassifyIn"},"ClassifyOut":{"properties":{"ok":{"type":"boolean","title":"Ok"},"data":{"additionalProperties":true,"type":"object","title":"Data"}},"type":"object","required":["ok","data"],"title":"ClassifyOut"},"CreateCheckoutIn":{"properties":{"transaction_ref":{"type":"string","maxLength":64,"minLength":1,"title":"Transaction Ref"},"success_url":{"type":"string","title":"Success Url"},"cancel_url":{"type":"string","title":"Cancel Url"}},"type":"object","required":["transaction_ref","success_url","cancel_url"],"title":"CreateCheckoutIn"},"CreateCheckoutSessionRequest":{"properties":{"transaction_ref":{"type":"string","title":"Transaction Ref","description":"Unique transaction reference"},"amount":{"type":"integer","exclusiveMinimum":0.0,"title":"Amount","description":"Amount in smallest currency unit (e.g., cents)"},"currency":{"type":"string","title":"Currency","description":"Three-letter ISO currency code","default":"usd"},"customer_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Email","description":"Customer email address"},"customer_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Phone","description":"Customer phone number"},"success_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Success Url","description":"Custom success redirect URL"},"cancel_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancel Url","description":"Custom cancel redirect URL"},"metadata":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Metadata","description":"Additional metadata"}},"type":"object","required":["transaction_ref","amount"],"title":"CreateCheckoutSessionRequest"},"CreateIntentIn":{"properties":{"transaction_ref":{"type":"string","maxLength":64,"minLength":1,"title":"Transaction Ref"}},"type":"object","required":["transaction_ref"],"title":"CreateIntentIn"},"CreateIntentOut":{"properties":{"ok":{"type":"boolean","title":"Ok"},"data":{"additionalProperties":true,"type":"object","title":"Data"}},"type":"object","required":["ok","data"],"title":"CreateIntentOut"},"CreatePaymentLinkRequest":{"properties":{"transaction_ref":{"type":"string","title":"Transaction Ref","description":"Unique transaction reference"},"amount":{"type":"integer","exclusiveMinimum":0.0,"title":"Amount","description":"Amount in smallest currency unit"},"currency":{"type":"string","title":"Currency","description":"Three-letter ISO currency code","default":"usd"},"metadata":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Metadata","description":"Additional metadata"}},"type":"object","required":["transaction_ref","amount"],"title":"CreatePaymentLinkRequest"},"CustomerIn":{"properties":{"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"}},"type":"object","title":"CustomerIn"},"FailureEventIn":{"properties":{"transaction_ref":{"type":"string","maxLength":64,"minLength":1,"title":"Transaction Ref"},"amount":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Amount","description":"minor units (e.g., paise)"},"currency":{"anyOf":[{"type":"string","maxLength":8,"minLength":3},{"type":"null"}],"title":"Currency"},"gateway":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gateway"},"failure_reason":{"type":"string","minLength":1,"title":"Failure Reason"},"occurred_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Occurred At"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"customer":{"anyOf":[{"$ref":"#/components/schemas/CustomerIn"},{"type":"null"}]}},"type":"object","required":["transaction_ref","failure_reason"],"title":"FailureEventIn"},"FailureEventOut":{"properties":{"id":{"type":"integer","title":"Id"},"transaction_id":{"type":"integer","title":"Transaction Id"}},"type":"object","required":["id","transaction_id"],"title":"FailureEventOut"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"NotificationLogResponse":{"properties":{"id":{"type":"integer","title":"Id"},"channel":{"type":"string","title":"Channel"},"recipient":{"type":"string","title":"Recipient"},"status":{"type":"string","title":"Status"},"provider":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Provider"},"sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sent At"},"delivered_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Delivered At"},"failed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Failed At"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","channel","recipient","status","provider","sent_at","delivered_at","failed_at","error_message","created_at"],"title":"NotificationLogResponse"},"OrganizationResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"slug":{"type":"string","title":"Slug"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","name","slug","is_active","created_at"],"title":"OrganizationResponse"},"PaymentLinkResponse":{"properties":{"payment_link_id":{"type":"string","title":"Payment Link Id"},"url":{"type":"string","title":"Url"},"product_id":{"type":"string","title":"Product Id"},"price_id":{"type":"string","title":"Price Id"}},"type":"object","required":["payment_link_id","url","product_id","price_id"],"title":"PaymentLinkResponse"},"PublicCheckoutRequest":{"properties":{"transaction_ref":{"type":"string","title":"Transaction Ref"},"success_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Success Url"},"cancel_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancel Url"}},"type":"object","required":["transaction_ref"],"title":"PublicCheckoutRequest"},"PublicCheckoutResponse":{"properties":{"ok":{"type":"boolean","title":"Ok"},"data":{"additionalProperties":true,"type":"object","title":"Data"}},"type":"object","required":["ok","data"],"title":"PublicCheckoutResponse"},"RecoveryLinkOut":{"properties":{"attempt_id":{"type":"integer","title":"Attempt Id"},"transaction_id":{"type":"integer","title":"Transaction Id"},"token":{"type":"string","title":"Token"},"url":{"type":"string","title":"Url"},"expires_at":{"type":"string","title":"Expires At"}},"type":"object","required":["attempt_id","transaction_id","token","url","expires_at"],"title":"RecoveryLinkOut"},"RecoveryLinkRequest":{"properties":{"ttl_hours":{"type":"number","maximum":168.0,"minimum":0.0,"title":"Ttl Hours","default":24},"channel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Channel","default":"link"}},"type":"object","title":"RecoveryLinkRequest"},"RetryPolicyCreate":{"properties":{"name":{"type":"string","maxLength":128,"minLength":1,"title":"Name"},"max_retries":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Max Retries","default":3},"initial_delay_minutes":{"type":"integer","maximum":1440.0,"minimum":1.0,"title":"Initial Delay Minutes","default":60},"backoff_multiplier":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Backoff Multiplier","default":2},"max_delay_minutes":{"type":"integer","maximum":10080.0,"minimum":60.0,"title":"Max Delay Minutes","default":1440},"enabled_channels":{"items":{"type":"string"},"type":"array","title":"Enabled Channels","default":["email"]},"channels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Channels"}},"type":"object","required":["name"],"title":"RetryPolicyCreate"},"RetryPolicyResponse":{"properties":{"id":{"type":"integer","title":"Id"},"org_id":{"type":"integer","title":"Org Id"},"name":{"type":"string","title":"Name"},"max_retries":{"type":"integer","title":"Max Retries"},"initial_delay_minutes":{"type":"integer","title":"Initial Delay Minutes"},"backoff_multiplier":{"type":"integer","title":"Backoff Multiplier"},"max_delay_minutes":{"type":"integer","title":"Max Delay Minutes"},"enabled_channels":{"items":{"type":"string"},"type":"array","title":"Enabled Channels"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","org_id","name","max_retries","initial_delay_minutes","backoff_multiplier","max_delay_minutes","enabled_channels","is_active","created_at","updated_at"],"title":"RetryPolicyResponse"},"RetryStatsResponse":{"properties":{"total_attempts":{"type":"integer","title":"Total Attempts"},"pending_retries":{"type":"integer","title":"Pending Retries"},"sent_count":{"type":"integer","title":"Sent Count"},"completed_count":{"type":"integer","title":"Completed Count"},"failed_count":{"type":"integer","title":"Failed Count"},"avg_retry_count":{"type":"number","title":"Avg Retry Count"}},"type":"object","required":["total_attempts","pending_retries","sent_count","completed_count","failed_count","avg_retry_count"],"title":"RetryStatsResponse"},"SessionStatusResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"status":{"type":"string","title":"Status"},"payment_status":{"type":"string","title":"Payment Status"},"amount_total":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Amount Total"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency"},"customer_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Email"},"payment_intent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Intent Id"}},"type":"object","required":["session_id","status","payment_status","amount_total","currency","customer_email","payment_intent_id"],"title":"SessionStatusResponse"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"user":{"$ref":"#/components/schemas/UserResponse"},"organization":{"$ref":"#/components/schemas/OrganizationResponse"}},"type":"object","required":["access_token","user","organization"],"title":"TokenResponse"},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"password":{"type":"string","minLength":8,"title":"Password"},"org_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Org Name"},"org_slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Org Slug"}},"type":"object","required":["email","password"],"title":"UserCreate"},"UserLogin":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"UserLogin"},"UserResponse":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"id":{"type":"integer","title":"Id"},"role":{"type":"string","title":"Role"},"is_active":{"type":"boolean","title":"Is Active"},"org_id":{"type":"integer","title":"Org Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["email","id","role","is_active","org_id","created_at"],"title":"UserResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}
